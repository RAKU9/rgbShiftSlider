window.rbgShiftSlider=function(e){(e=e||{}).slideImages=e.hasOwnProperty("slideImages")?e.slideImages:[],e.stageWidth=e.hasOwnProperty("stageWidth")?e.stageWidth:1920,e.stageHeight=e.hasOwnProperty("stageHeight")?e.stageHeight:1080,e.displacementImage=e.hasOwnProperty("displacementImage")?e.displacementImage:"",e.fullScreen=!e.hasOwnProperty("fullScreen")||e.fullScreen,e.transitionDuration=e.hasOwnProperty("transitionDuration")?e.transitionDuration:.25,e.transitionGhostDuration=e.hasOwnProperty("transitionGhostDuration")?e.transitionGhostDuration:.25,e.transitionFilterIntensity=e.hasOwnProperty("transitionFilterIntensity")?e.transitionFilterIntensity:350,e.transitioSpriteIntensity=e.hasOwnProperty("transitioSpriteIntensity")?e.transitioSpriteIntensity:2,e.mouseDispIntensity=e.hasOwnProperty("mouseDispIntensity")?e.mouseDispIntensity:3,e.navElement=e.hasOwnProperty("navElement")?e.navElement:document.querySelectorAll(".scene-nav"),e.interactive=!e.hasOwnProperty("interactive")||e.interactive,e.autoPlay=!e.hasOwnProperty("autoPlay")||e.autoPlay,e.autoPlaySpeed=e.hasOwnProperty("autoPlaySpeed")?e.autoPlaySpeed:3e3;var t=document.getElementById("rbgShiftSlider");PIXI.utils.skipHello();var n,i,a,r,s,o,l,h=new PIXI.Container,u=PIXI.autoDetectRenderer(e.stageWidth,e.stageHeight,{transparent:!0}),I=new PIXI.Container,c=[],w=[],d=[],y=[],p=[],m=[];const g={x:0,y:0};var f,v,P,x=0,D=0,S=0,O=0,X=0,C=!1;function F(t){TweenMax.set(g,{x:0,ease:Power0.easeOut}),(P=new TimelineMax({onStart:function(){C=!0,TweenMax.to(g,e.transitionGhostDuration,{x:screen.width,ease:Power0.easeOut})},onComplete:function(){X=t,C=!1,!0===e.interactive&&function(){if(cancelAnimationFrame(v),!P.isActive()){for(var t=0,n=d.length;t<n;t++)m[t].x=0,m[t].y=0,p[t].scale.x=0,p[t].scale.y=0;I.on("mousemove",i).on("touchmove",i),function t(){if(f=requestAnimationFrame(t),g.x>=screen.width){S+=(x-S)/e.mouseDispIntensity,O+=(D-O)/e.mouseDispIntensity;for(var n=0,i=d.length;n<i;n++)p[n].scale.x=S-m[n].x,p[n].scale.y=O-m[n].y,m[n].position.x=S,m[n].position.y=O}else cancelAnimationFrame(f)}()}function i(e){x=e.data.global.x,D=e.data.global.y}}()},onUpdate:function(){S+=(g.x-S)/3,O+=(g.x-O)/3;for(var t=0,n=d.length;t<n;t++)p[t].scale.x=Math.atan(S-m[t].x)*(P.progress()*e.transitionFilterIntensity),m[t].position.x=O*(P.progress()*e.transitionSpriteIntensity);console.log(g.x)}})).to([c[0],c[1],c[2]],e.transitionDuration,{alpha:0,ease:Power2.easeOut},e.transitionDuration).add(function(){for(var n=0;n<e.slideImages.length;++n)if(n==t)for(var i=0,a=d.length;i<a;i++)c[i].texture=w[n],P.to(c[i],e.transitionDuration,{alpha:1,ease:Power2.easeOut},e.transitionDuration)},e.transitionDuration)}for(var M=document.querySelectorAll(".scene-nav"),b=0;b<M.length;b++)M[b].onclick=function(t){return!C&&("next"===this.getAttribute("data-nav")?X>=0&&X<e.slideImages.length-1?F(X+1):F(0):X>0&&X<e.slideImages.length?F(X-1):F(e.slideImages.length-1),!1)};t.appendChild(u.view),h.addChild(I),!0===e.fullScreen?(u.view.style.objectFit="cover",u.view.style.width="100%",u.view.style.height="100%",u.view.style.top="50%",u.view.style.left="50%",u.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)",u.view.style.transform="translate( -50%, -50% ) scale(1.2)"):(u.view.style.maxWidth="100%",u.view.style.top="50%",u.view.style.left="50%",u.view.style.webkitTransform="translate( -50%, -50% )",u.view.style.transform="translate( -50%, -50% )"),(n=new PIXI.ticker.Ticker).autoStart=!0,n.add(function(e){u.render(h)}),I.interactive=!0,function(){(i=new PIXI.filters.ColorMatrixFilter).matrix=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],(a=new PIXI.filters.ColorMatrixFilter).matrix=[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0],(r=new PIXI.filters.ColorMatrixFilter).matrix=[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],y.push(i,a,r),(s=new PIXI.Container).position.x=0,(o=new PIXI.Container).position.x=0,(l=new PIXI.Container).position.x=0,d.push(s,o,l);for(var t=0;t<e.slideImages.length;++t)w[t]=new PIXI.Texture.fromImage(e.slideImages[t]);t=0;for(var n=d.length;t<n;t++){I.addChild(d[t]),texture=new PIXI.Texture.fromImage(e.displacementImage),m.push(new PIXI.Sprite(texture)),p.push(new PIXI.filters.DisplacementFilter(m[t]));var h=new PIXI.Sprite(w[0]);c.push(h),c[t].width=u.view.width,c[t].height=u.view.height,c[t].anchor.set(.5),c[t].x=u.view.width/2,c[t].y=u.view.height/2,c[t].alpha=0,d[t].addChild(m[t],c[t]),d[t].filters=[p[t],y[t]],p[t].scale.x=0,p[t].scale.y=0,p[t].autoFit=!0}m[0].anchor.set(0),m[1].anchor.set(.5),m[2].anchor.set(.3),d[1].filters[1].blendMode=PIXI.BLEND_MODES.ADD,d[2].filters[1].blendMode=PIXI.BLEND_MODES.ADD}(),!0===e.autoPlay?(Date.now(),F(X=0),setInterval(function(){(X+=1)===e.slideImages.length?F(X=0):F(X)},e.autoPlaySpeed)):F(0)};